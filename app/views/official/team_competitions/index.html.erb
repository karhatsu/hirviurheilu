<% content_for :title, "#{@race.name} - Joukkuekilpailut" %>
<h2>Joukkuekilpailut</h2>
<%= flash_success %>
<% unless @race.team_competitions.empty? %>
  <div class="section">
    <table>
      <tr>
        <th>Kilpailun nimi</th>
        <th>Kilpailijoita / joukkue</th>
        <th>Sarjat / ikäryhmät</th>
        <th>&nbsp;</th>
      </tr>
      <% @race.team_competitions.each do |tc| %>
        <tr>
          <td><%= link_to tc.name, edit_official_race_team_competition_path(@race, tc) %></td>
          <td class="center"><%= tc.team_competitor_count %></td>
          <td><%= ((tc.series.map &:name) + (tc.age_groups.map &:name)).join(', ') %></td>
          <td><%= link_to 'Poista joukkuekilpailu',
              official_race_team_competition_path(@race, tc), :method => :delete,
              :data => { :confirm => 'Haluatko varmasti poistaa tämän joukkuekilpailun?' } %></td>
        </tr>
      <% end %>
    </table>
  </div>
<% end %>
<div class="action_box">
  <%= link_to 'Lisää joukkuekilpailu', new_official_race_team_competition_path(@race) %>
</div>
<hr/>
<%= link_to 'Takaisin kilpailun etusivulle', official_race_path(@race) %>