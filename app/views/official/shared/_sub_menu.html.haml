- race = menu_race
- if race
  - series = menu_series
  - series = race.series.first unless series
  .menu-indicator
    %a.material-icons-outlined.md-24{onclick: 'event.preventDefault(); toggleSubMenu();', href: '#'} menu
  .menu.menu--sub.menu--sub-1
    = menu_item t('official_sub_menu.summary'), official_race_path(race), @is_race
    = menu_item t('official_sub_menu.race'), edit_official_race_path(race), @is_race_edit
    - if series && !race.series.first.new_record?
      = menu_item t('official_sub_menu.competitors'), official_series_competitors_path(series), @is_competitors, nil, true do
        - series_dropdown_menu(race, 'competitors')
    - if series && !race.series.first.new_record?
      - if race.sport.start_list?
        = menu_item t('official_sub_menu.start_times'), official_race_start_list_path(race), @is_start_list
      - elsif race.sport.nordic?
        = menu_item t('official_sub_menu.batch_list_generation'), official_series_qualification_round_batch_list_path(series), @qualification_round_batch_list
      - elsif race.sport.batch_list?
        = menu_item t('official_sub_menu.qualification_round_batch_list'), official_series_qualification_round_batch_list_path(series), @qualification_round_batch_list
        = menu_item t('official_sub_menu.final_round_batch_list'), official_series_final_round_batch_list_path(series), @final_round_batch_list
    - if race.sport.batch_list?
      = menu_item t('official_sub_menu.batches'), official_race_batches_path(race), @is_batches
    - if series && !race.series.first.new_record? && !race.sport.nordic?
      = menu_item t('official_sub_menu.quick_save'), official_race_quick_saves_path(race), @is_quick_saves
      - unless race.sport.shooting?
        = menu_item t('official_sub_menu.times'), official_series_times_path(series), @is_times, nil, true do
          - series_dropdown_menu(race, 'times')
        = menu_item t('official_sub_menu.estimates'), official_series_estimates_path(series), @is_estimates, nil, true do
          - series_dropdown_menu(race, 'estimates')
      - shooting_by_series_key = race.sport.shooting? ? 'shooting_by_series' : 'shooting'
      = menu_item t("official_sub_menu.#{shooting_by_series_key}"), official_series_shots_path(series), @is_shots, nil, true do
        - series_dropdown_menu(race, 'shots')
      - if race.sport.shooting?
        = menu_item t('official_sub_menu.shooting_by_batches'), official_race_shooting_by_batches_path(race), @is_shots_by_batches
      - unless race.sport.shooting?
        = menu_item t('official_sub_menu.correct_distances'), official_race_correct_estimates_path(race), @is_correct_estimates
    - elsif series && !race.series.first.new_record? && race.sport.nordic?
      = menu_item t('sport_name.nordic_sub.trap'), official_series_trap_path(series), @is_trap, nil, true do
        - series_dropdown_menu(race, 'trap_shots')
      = menu_item t('sport_name.nordic_sub.shotgun'), official_series_shotgun_path(series), @is_shotgun, nil, true do
        - series_dropdown_menu(race, 'shotgun_shots')
      = menu_item t('sport_name.nordic_sub.rifle_moving'), official_series_rifle_moving_path(series), @is_rifle_moving, nil, true do
        - series_dropdown_menu(race, 'rifle_moving_shots')
      = menu_item t('sport_name.nordic_sub.rifle_standing'), official_series_rifle_standing_path(series), @is_rifle_standing, nil, true do
        - series_dropdown_menu(race, 'rifle_standing_shots')
    - if series && !race.series.first.new_record?
      = menu_item t('official_sub_menu.csv'), official_race_csv_export_path(race), @is_csv
      = menu_item t('official_sub_menu.team_competitions'), official_race_team_competitions_path(race), @is_team_competitions
    - if race.sport.relays?
      = menu_item t('official_sub_menu.relays'), official_race_relays_path(race), @is_relays
    = menu_item clubs_title(race), official_race_clubs_path(race), @is_clubs
    = menu_item t('official_sub_menu.officials'), official_race_race_rights_path(race), @is_race_rights
:javascript
  function toggleSubMenu() {
    const $subMenu = $('.menu--sub-1')
    if ($subMenu.is(':visible')) {
      $subMenu.removeClass('menu--visible')
    } else {
      $subMenu.addClass('menu--visible')
    }
  }
